<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add New Quiz</title>
    <link th:href="@{../vendor/bootstrap/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{../css/main.css}" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" th:href="@{/images/favicon.ico}" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
<header th:insert="~{index.html :: header-navbar}" class="bg-light"></header>


    <div class="container-fluid col-md-4" style="padding-top: 30px">
        <h2>CREATE NEW QUIZ</h2>

        <form id="quizForm" class="justify-content-center" th:action="@{/quiz/create}" th:object="${quiz}" method="post" >
            <div id="errorMessage" class="alert alert-danger" role="alert" style="display: none;"></div>
            <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Quiz Code</label>
                <input th:field="*{code}" type="text" class="form-control" id="exampleFormControlInput1" placeholder="Quiz Code"
                       style="align-content: center; width: 450px ">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Quiz Title</label>
                <input th:field="*{title}" type="text" class="form-control" id="exampleFormControlInput2" placeholder="Quiz Title"
                       style="align-content: center; width: 450px ">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label">Description</label>
                <textarea th:field="*{description}" class="form-control" id="exampleFormControlTextarea1" rows="3"
                          style="align-content: center; width: 450px "></textarea>
            </div>
            <div style="display:flex">
                <div class="form-check">
                    <input th:field="*{isExamOnly}" class="form-check-input" type="radio" name="is_exam_only" id="flexRadioDefault1" value="1">
                    <label class="form-check-label" for="flexRadioDefault1">
                        Exam Only
                    </label>
                </div>
                <div class="form-check">
                    <input th:field="*{isExamOnly}" class="form-check-input" type="radio" name="is_exam_only" id="flexRadioDefault2" value="0">
                    <label class="form-check-label" for="flexRadioDefault2">
                        Practice
                    </label>
                </div>
            </div>
            <div class="form-check">
                <input th:field="*{isActive}" class="form-check-input" type="checkbox" name="is_active" value="1" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">
                    Enable
                </label>
            </div>
                <button type="submit" class="btn btn-primary">Create</button>
        </form>
    </div>
</body>

<script>
    $(document).ready(function () {
        // Intercept form submission
        $("#quizForm").submit(function (event) {
            // Prevent the default form submission
            event.preventDefault();

            // Perform Ajax request
            $.ajax({
                type: "POST",
                url: "/quiz/create",
                data: $("#quizForm").serialize(),
                success: function (data) {
                    // Redirect or handle success as needed
                    window.location.href = "/quiz";
                },
                error: function (xhr, status, error) {
                    // Handle errors
                    var errorMessage = JSON.parse(xhr.responseText).errorMessage;
                    $("#errorMessage").text(errorMessage).show();
                }
            });
        });
    });
</script>
</html>